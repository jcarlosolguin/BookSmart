/* eslint-disable
 func-names,
 max-lines,
 max-nested-callbacks,
 max-statements,
 no-undefined,
 prefer-arrow-callback
 */
/* global describe, it */

'use strict';

const appModulePath = require('app-module-path');
const Utils = require('javascript-utils');

appModulePath.addPath('./');

const WebClient = require('lib/webClient');

describe('WebClient', function () {
    describe('webClient::getAsJson', function () {
        const webClient = new WebClient('http://ip.jsontest.com');

        it('should return an IP', function () {
            return webClient.requestBodyAsJson()
                .then(verifyResponse);

            function verifyResponse (response) {
                Utils.assertionUtils.assertSchema(response, { ip: () => true });
            }
        });
    });
});
